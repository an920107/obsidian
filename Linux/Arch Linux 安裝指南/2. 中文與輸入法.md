## 2.1 中文介面

### 2.1.1 安裝中文字體

Arch Linux 內建沒有中文字體，所有中、日、韓文都將無法正常顯示，但有 `noto-fonts-cjk` 套件，使用 `pacman` 安裝即可

```bash
sudo pacman -S noto-fonts-cjk
```

### 2.1.2 設定中文 locale

1. 編輯 `/etc/locale.gen` 檔案，將 `zh_TW.UTF-8 UTF-8` 這行取消註解

2. 用以下指令生成 locale 設定檔
   
   ```bash
   sudo locale-gen
   ```

3. 打開 gnome 設定，在 `Region and Location` 將語言和格式都設定為中文 [^1]

4. 重新啟動即可套用語系設定，建議不要將 `Desktop`、`Documents`、`Downloads` ... 等資料夾目錄名稱調整為中文

[^1]: 在這裡這定語言並不會調整到全域 locale 設定，gnome 會將使用者設定檔儲存在 `/var/lib/AccountService/users` 中

## 2.2 中文輸入法

1. 安裝 `fcitx5` 與相關套件，安裝中可能會被詢問要使用的字體，可選擇 `noto-fonts`
   
   ```bash
   sudo pacman -S fcitx5 fcitx5-chewing fcitx5-chinese-addons fcitx5-chinese-gtk fcitx5-qt fcitx5-configtool
   ```

2. 安裝以下 AUR 套件（安裝方式詳見 [[Arch Linux 的套件管理#安裝 AUR 套件||安裝 AUR 套件]]）
   
   <https://aur.archlinux.org/packages/fcitx5-mcbopomofo-git>

3. 打開 gnome 設定，在 `鍵盤` > `檢視與自訂快捷鍵` > `輸入` 將兩項都取消按鍵綁定

4. 建立 `~/.config/environment/input.conf` 輸入以下內容
   
   ```env
   GTK_IM_MODULE=fcitx
   QT_IM_MODULE=fcitx
   XMODIFIERS=@im=fcitx
   INPUT_METHOD=fcitx
   SDL_IM_MODULE=fcitx
   GLFW_IM_MODULE=ibus
   ```

5. 重新登入，並打開 fcitx5 設定，將 `McBopomofo` 新增到群組中，如圖
   
   ![[螢幕快照 2023-10-31 19-40-45 1.png]]

6. 在輸入法頁籤中，點選 `McBopomofo`，進入中間選單的設定齒輪進行以下設置
   
   ![[螢幕快照 2023-10-31 20-03-11.png]]

7. 設定 fcitx 全域選項，如圖
   
   ![[螢幕快照 2023-10-31 19-40-45 2.png]]

8. 安裝以下 gnome extension 重新登入並啟用
   
   <https://github.com/wengxt/gnome-shell-extension-kimpanel>

9. 如果覺得輸入法的 `麥` 很醜，可以編輯 `/usr/share/fcitx5/inputmethod/mcbopomofo.conf` 將 `麥` 改為 `ㄅ` 或其他符號